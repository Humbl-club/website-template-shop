{% comment %}
  Renders share buttons
{% endcomment %}

<div id="standardShare" class="social-sharing-component share-hidden">
  <a href="https://facebook.com/sharer.php?u={{ share_link }}" target="_blank" rel="noopener" aria-label="{{ 'general.social.alt_text.share_on_facebook' | t }}">{% render 'icon-facebook' %}</a>
  <a href="https://twitter.com/home?status={{ share_link }}" target="_blank" rel="noopener" aria-label="{{ 'general.social.alt_text.share_on_twitter' | t }}">{% render 'icon-twitter-x' %}</a>
  <a href="https://pinterest.com/pin/create/button/?url={{ share_link }}" target="_blank" rel="noopener" aria-label="{{ 'general.social.alt_text.share_on_pinterest' | t }}">{% render 'icon-pinterest' %}</a>
  <a href="https://api.whatsapp.com/send?text={{ share_link }}" rel="noopener" aria-label="{{ 'general.social.alt_text.share_on_whatsapp' | t }}">{% render 'icon-whatsapp' %}</a>
</div>

<div id="nativeShare" class="social-sharing-component">
  <button id="nativeShareButton" class="social-sharing-native-share-button">{% render 'icon-share' %}</button> 
</div>

<script>
  const nativeShareWrapper = document.getElementById('nativeShare');
  const nativeShare = document.getElementById('nativeShareButton');
  const standardShare = document.getElementById('standardShare');
  
  if (navigator.share) {
    standardShare.classList.remove("share-hidden");
    standardShare.style.display = 'none';
  } else {
    nativeShareWrapper.style.display = 'none';
    standardShare.classList.remove("share-hidden");
    standardShare.classList.add("share-visible");      
  }
  if (nativeShare && nativeShare.style.display !== 'none') {
      nativeShare.addEventListener('click', async () => {
        if (navigator.share) {
          try {
            await navigator.share({
                title: document.title,
                url: window.location.href
            });
          } catch (error) {
              console.error('Error sharing:', error);
          }
        }
      });
  }
</script>