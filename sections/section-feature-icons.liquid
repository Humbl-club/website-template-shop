{{ 'section-feature-icons.css' | asset_url | stylesheet_tag }}

{% assign icon_render_size = section.settings.icon_size_desktop | times: 2 %}

{% style %}

.section-{{ section.id }} .section-inner {
  padding-top: {{ section.settings.top_padding | times: 0.8 }}px;
  padding-bottom: {{ section.settings.bottom_padding | times: 0.8 }}px;
}
  
@media only screen and (min-width: 750px) {
  .section-{{ section.id }} .section-inner {
    padding-top: {{ section.settings.top_padding }}px;
    padding-bottom: {{ section.settings.bottom_padding }}px;
  }  
}

.section-{{ section.id }} .feature-icon--item.layout--vertical .feature-icon--text {
  padding-top: {{ section.settings.icon_to_title_spacing }}px;
}

.section-{{ section.id }} .feature-icon--item.layout--horizontal .feature-icon--text {
  column-gap: {{ section.settings.icon_to_title_spacing }}px;
}

.section-{{ section.id }} .feature-icon--item .feature-icon--text-description {
  padding-top: {{ section.settings.icon_title_spacing_bottom }}px;
}

.section-{{ section.id }} .feature-icon-grid {
  column-gap: {{ section.settings.icon_spacing_mobile }}px;
  row-gap: {{ section.settings.icon_spacing_mobile }}px;
}

.section-{{ section.id }} .logo-placeholder {
  width: {{ section.settings.icon_size_mobile }}px;
  height: {{ section.settings.icon_size_mobile }}px;
}

.section-{{ section.id }} .feature-icon--image img {
  width: {{ section.settings.icon_size_mobile }}px;
  height: auto;  
}

.section-{{ section.id }} .feature-icon--text {
  max-width: {{ section.settings.icon_text_max_width }}px;
}
  
{% if section.settings.grid_columns_mobile == 'auto' %}
.section-{{ section.id }} .feature-icon-grid {
  display: flex;
}
.section-{{ section.id }} .feature-icon--item {
  width: auto;
}
{% endif %}

{% unless section.settings.grid_columns_mobile == 'auto' %}
.section-{{ section.id }} .feature-icon-grid {
  display: grid;
  grid-template-columns: repeat({{ section.settings.grid_columns_mobile }}, 1fr);
  grid-template-rows: repeat(1, 1fr);
}
{% endunless %}
  
@media only screen and (min-width: 750px) {
  .section-{{ section.id }} .feature-icon--image .logo-placeholder {
    width: {{ section.settings.icon_size_tablet }}px;
    height: {{ section.settings.logo_size_mobile }}px;
  }
  .section-{{ section.id }} .feature-icon--image img {
    width: {{ section.settings.icon_size_tablet }}px;
    height: auto;  
  }
  {% if section.settings.grid_columns_tablet == 'auto' %}
  .section-{{ section.id }} .feature-icon-grid {
    display: flex;
    column-gap: {{ section.settings.icon_spacing_tablet }}px;
  }
  .section-{{ section.id }} .feature-icon--item {
    width: auto;
  }
  {% endif %}
  {% unless section.settings.grid_columns_tablet == 'auto' %}
  .section-{{ section.id }} .feature-icon-grid {
    display: grid;
    grid-template-columns: repeat({{ section.settings.grid_columns_tablet }}, 1fr);
    grid-template-rows: repeat(1, 1fr);
    column-gap: {{ section.settings.logo_tablet }}px;
  }
  {% endunless %}
}

@media only screen and (min-width: 1025px) {
  .section-{{ section.id }} .feature-icon--image .logo-placeholder {
    width: {{ section.settings.icon_size_desktop }}px;
    height: {{ section.settings.logo_size_mobile }}px;
  }
  .section-{{ section.id }} .feature-icon--image img {
    width: {{ section.settings.icon_size_desktop }}px;
    height: auto;  
  }
  {% if section.settings.grid_columns_desktop == 'auto' %}
  .section-{{ section.id }} .feature-icon-grid {
    display: flex;
    column-gap: {{ section.settings.icon_spacing_desktop }}px;
  }
  .section-{{ section.id }} .feature-icon--item {
    width: auto;
  }
  {% endif %}  
  {% unless section.settings.grid_columns_desktop == 'auto' %}
  .section-{{ section.id }} .feature-icon-grid {
    display: grid;
    column-gap: {{ section.settings.icon_spacing }}px;
    grid-template-columns: repeat({{ section.settings.grid_columns_desktop }}, 1fr);
    grid-template-rows: repeat(1, 1fr);
  }
  {% endunless %}  
}
  
{% endstyle %}

<div class="section-container feature-icon-section section-{{ section.id }} color-scheme-{{ section.settings.text_color }} color-scheme-{{ section.settings.bg_color }}">

{% if section.settings.top_border %}
<hr class="section-border section-border-color-{{ section.settings.border_color }} section-border-width-{{ section.settings.border_width }}">
{% endif %}
  
<div class="section-inner align-{{ section.settings.content_alignment }}">  
{% unless section.settings.section_label == blank and section.settings.heading == blank and section.settings.subheading == blank %}
<div class="section-header {{ section.settings.content_width }} section-header-std-padding">
{% unless section.settings.section_label == blank %}<div class="section-label">{{ section.settings.section_label }}</div>{% endunless %}
{% unless section.settings.heading == blank %}<h2 class="{{ section.settings.heading_size }}">{{ section.settings.heading }}</h2>{% endunless %}
{% unless section.settings.subheading == blank %}{{ section.settings.subheading }}{% endunless %}
</div>
{% endunless %}

<div class="feature-icon-grid-wrapper {{ section.settings.content_width }}">
  <ul class="feature-icon-grid">
    {% for block in section.blocks %}
    <li class="feature-icon--item layout--{{ section.settings.icon_layout }} icon-alignment--{{ section.settings.icon_vertical_alignment }}" {{ block.shopify_attributes }}>
      {% if block.settings.image %} 
      <div class="feature-icon--image">{{ block.settings.image | image_url: width: icon_render_size | image_tag: loading: 'lazy' }}</div>
      {% else %}
      <div class="feature-icon--image">
        {% render 'icon-icon-placeholder' %}
      </div>
      {% endif %}
      <div class="feature-icon--text text-small">
        <h3 class="{{ section.settings.icon_title_size }}">{{ block.settings.heading }}</h3>
        <span class="feature-icon--text-description text-{{ section.settings.icon_description_size }}">{{ block.settings.description }}</span>
      </div>
    </li>
    {% endfor %}  
  </ul>
</div>

{% if section.settings.btn_enable %}
<div class="section-footer button-color-scheme--{{ section.settings.btn_color_scheme }}">
    {% if section.settings.btn_style == 'solid' %}
	<a href="{{ section.settings.btn_link }}" role="link" class="button button--solid">{{ section.settings.btn_txt }}</a>
    {% endif %}
    {% if section.settings.btn_style == 'outline' %}
	<a href="{{ section.settings.btn_link }}" role="link" class="button button--outline">{{ section.settings.btn_txt }}</a>
    {% endif %}
    {% if section.settings.btn_style == 'link' %}
	<a href="{{ section.settings.btn_link }}" role="link" class="link--underlined">{{ section.settings.btn_txt }}</a>
    {% endif %}
</div>
{% endif %}
  
</div>

{% if section.settings.bottom_border %}
<hr class="section-border section-border-color-{{ section.settings.border_color }} section-border-width-{{ section.settings.border_width }}">
{% endif %}
  
</div>

{% schema %}
  {
    "name": "t:sections.feature_icons.name",
  	"tag": "section",
  	"class": "section",    
    "disabled_on": {
      "groups": ["header", "footer"],
      "templates": ["cart"]
    },
    "max_blocks": 24,
    "settings": [
    {
      "type": "header",
      "content": "t:sections.all.text"
    },
    {
      "type": "text",
      "id": "section_label",
      "label": "t:sections.all.caption"
	},
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.all.heading"
	},
    {
      "type": "richtext",
      "id": "subheading",
      "label": "t:sections.all.sub_heading"
	},
    {
      "type": "select",
      "id": "heading_size",
      "label": "t:sections.all.heading_size.label",
      "options": [
        {
          "value": "h3",
          "label": "t:sections.all.heading_size.small.label"
        },
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.normal.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.large.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.xl.label"
        }
        ],
      "default": "h2"
    },
    {
      "type": "checkbox",
      "id": "btn_enable",
      "default": false,
      "label": "t:sections.all.buttons.show_button"
	},
    {
      "type": "text",
      "id": "btn_txt",
      "label": "t:sections.all.buttons.button_label"
	},
    {
      "type": "url",
      "id": "btn_link",
      "label": "t:sections.all.buttons.button_link"
	},
    {
      "type": "select",
      "id": "btn_style",
      "label": "t:sections.all.buttons.button_style",
      "options": [
        {
          "value": "solid",
          "label": "t:sections.all.buttons.button_style_solid"
        },
        {
          "value": "outline",
          "label": "t:sections.all.buttons.button_style_outline"
        },
        {
          "value": "link",
          "label": "t:sections.all.buttons.button_style_link"
        }
		],
      "default": "solid"
    },
    {
      "type": "header",
      "content": "t:sections.all.layout"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "t:sections.all.margin",
      "options": [
        {
          "value": "page-width",
          "label": "t:sections.all.default"
        },
        {
          "value": "page-width-narrow",
          "label": "t:sections.all.narrow"
        }
		],
      "default": "page-width"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "t:sections.all.alignment.alignment_header",
      "options": [
        {
          "value": "left",
          "label": "t:sections.all.alignment.left"
        },
        {
          "value": "center",
          "label": "t:sections.all.alignment.center"
        },
        {
          "value": "right",
          "label": "t:sections.all.alignment.right"
        }
		],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Icons"
    },
    {
      "type": "range",
      "id": "icon_size_mobile",
      "min": 32,
      "max": 160,
      "step": 4,
      "unit": "px",
      "default": 80,
      "label": "t:sections.feature_icons.settings.icon_size_mobile.label"
    },
    {
      "type": "range",
      "id": "icon_size_tablet",
      "min": 32,
      "max": 160,
      "step": 4,
      "unit": "px",
      "default": 80,
      "label": "t:sections.feature_icons.settings.icon_size_tablet.label"
    },
    {
      "type": "range",
      "id": "icon_size_desktop",
      "min": 32,
      "max": 160,
      "step": 4,
      "unit": "px",
      "default": 80,
      "label": "t:sections.feature_icons.settings.icon_size_desktop.label"
    },
    {
      "type": "select",
      "id": "grid_columns_mobile",
      "label": "t:sections.logo_wall.settings.grid_columns_mobile.label",
      "options": [
        {
          "value": "auto",
          "label": "t:sections.feature_icons.settings.grid_columns_mobile.options__1.label"
        },
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        }
      ],
      "default": "auto"
    },
    {
      "type": "select",
      "id": "grid_columns_tablet",
      "label": "t:sections.feature_icons.settings.grid_columns_tablet.label",
      "options": [
        {
          "value": "auto",
          "label": "t:sections.feature_icons.settings.grid_columns_mobile.options__1.label"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        },
        {
          "value": "4",
          "label": "4"
        },
        {
          "value": "5",
          "label": "5"
        },
        {
          "value": "6",
          "label": "6"
        }
      ],
      "default": "auto"
    },
    {
      "type": "select",
      "id": "grid_columns_desktop",
      "label": "t:sections.feature_icons.settings.grid_columns_desktop.label",
      "options": [
        {
          "value": "auto",
          "label": "t:sections.feature_icons.settings.grid_columns_mobile.options__1.label"
        },
        {
          "value": "2",
          "label": "2"
        },
        {
          "value": "3",
          "label": "3"
        },
        {
          "value": "4",
          "label": "4"
        },
        {
          "value": "5",
          "label": "5"
        },
        {
          "value": "6",
          "label": "6"
        },
        {
          "value": "7",
          "label": "7"
        },
        {
          "value": "8",
          "label": "8"
        }
      ],
      "default": "auto"
    },
    {
      "type": "range",
      "id": "icon_spacing_mobile",
      "min": 12,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40,
      "label": "t:sections.feature_icons.settings.grid_spacing_mobile.label"
    },
    {
      "type": "range",
      "id": "icon_spacing_tablet",
      "min": 12,
      "max": 180,
      "step": 4,
      "unit": "px",
      "default": 80,
      "label": "t:sections.feature_icons.settings.grid_spacing_tablet.label"
    },
    {
      "type": "range",
      "id": "icon_spacing_desktop",
      "min": 12,
      "max": 180,
      "step": 4,
      "unit": "px",
      "default": 80,
      "label": "t:sections.feature_icons.settings.grid_spacing_desktop.label"
    },
    {
      "type": "select",
      "id": "icon_layout",
      "label": "t:sections.feature_icons.settings.icon_layout.label",
      "options": [
        {
          "value": "vertical",
          "label": "t:sections.all.layouts.vertical"
        },
        {
          "value": "horizontal",
          "label": "t:sections.all.layouts.horizontal"
        }
		],
      "default": "vertical"
    },
    {
      "type": "select",
      "id": "icon_vertical_alignment",
      "label": "t:sections.feature_icons.settings.icon_vertical_alignment.label",
      "info": "t:sections.feature_icons.settings.icon_vertical_alignment.info",
      "options": [
        {
          "value": "top",
          "label": "t:sections.all.alignment.top"
        },
        {
          "value": "center",
          "label": "t:sections.all.alignment.center"
        }
		],
      "default": "top"
    },
    {
      "type": "select",
      "id": "icon_title_size",
      "label": "t:sections.all.heading_size.label",
      "options": [
        {
          "value": "h4",
          "label": "t:sections.all.size.small"
        },
        {
          "value": "h3",
          "label": "t:sections.all.size.normal"
        }
		],
      "default": "h3"
    },
    {
      "type": "select",
      "id": "icon_description_size",
      "label": "t:sections.feature_icons.settings.description_size.label",
      "options": [
        {
          "value": "small",
          "label": "t:sections.all.size.small"
        },
        {
          "value": "normal",
          "label": "t:sections.all.size.normal"
        }
		],
      "default": "normal"
    },
    {
      "type": "range",
      "id": "icon_to_title_spacing",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 12,
      "label": "t:sections.feature_icons.settings.icon_to_title_spacing.label",
      "info": "t:sections.feature_icons.settings.icon_to_title_spacing.info"
    },
    {
      "type": "range",
      "id": "icon_title_spacing_bottom",
      "min": 0,
      "max": 28,
      "step": 4,
      "unit": "px",
      "default": 8,
      "label": "t:sections.feature_icons.settings.icon_title_spacing_bottom.label",
      "info": "t:sections.feature_icons.settings.icon_title_spacing_bottom.info"
    },
    {
      "type": "range",
      "id": "icon_text_max_width",
      "label": "t:sections.feature_icons.settings.icon_text_max_width.label",
      "min": 100,
      "max": 600,
      "step": 10,
      "default": 300
    },
    {
      "type": "header",
      "content": "t:sections.all.colors.label"
    },
    {
      "type": "select",
      "id": "text_color",
      "options": [
        {
          "value": "fg-body",
          "label": "t:sections.all.colors.background_body.label"
        },
        {
          "value": "fg-01",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "fg-02",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "fg-03",
          "label": "t:sections.all.colors.accent_3.label"
        },
        {
          "value": "fg-04",
          "label": "t:sections.all.colors.accent_4.label"
        }
      ],
      "default": "fg-body",
      "label": "t:sections.all.colors.text_color.label"
    },
    {
      "type": "select",
      "id": "bg_color",
      "options": [
        {
          "value": "bg-body",
          "label": "t:sections.all.colors.background_body.label"
        },
        {
          "value": "bg-01",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "bg-02",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "bg-03",
          "label": "t:sections.all.colors.background_3.label"
        },
        {
          "value": "bg-04",
          "label": "t:sections.all.colors.background_4.label"
        }
      ],
      "default": "bg-body",
      "label": "t:sections.all.colors.background_color.label"
    },
    {
        "type": "select",
        "id": "btn_color_scheme",
        "label": "t:sections.all.buttons.button_color_scheme",
        "options": [
        {
        "value": "default",
        "label": "t:sections.all.default"
        },
        {
        "value": "match-section",
        "label": "t:sections.all.buttons.button_color_scheme_match"
        }
        ],
      "default": "default"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "top_padding",
      "min": 0,
      "max": 160,
      "step": 10,
      "unit": "px",
      "default": 80,
      "label": "t:sections.all.padding.padding_top"
    },
    {
      "type": "range",
      "id": "bottom_padding",
      "min": 0,
      "max": 160,
      "step": 10,
      "unit": "px",
      "default": 80,
      "label": "t:sections.all.padding.padding_bottom"
    },
    {
      "type": "header",
      "content": "t:sections.all.border"
    },
    {
      "type": "checkbox",
      "id": "top_border",
      "default": false,
      "label": "t:sections.all.border_top"
    },
    {
      "type": "checkbox",
      "id": "bottom_border",
      "default": false,
      "label": "t:sections.all.border_bottom"
    },
    {
      "type": "select",
      "id": "border_width",
      "label": "t:sections.all.width",
      "options": [
        {
          "value": "normal",
          "label": "t:sections.all.normal"
        },
        {
          "value": "full",
          "label": "t:sections.all.full_width"
        }
        ],
      "default": "normal"
    },
    {
      "type": "select",
      "id": "border_color",
      "label": "t:sections.all.border_color",
      "options": [
        {
          "value": "dark",
          "label": "t:sections.all.colors.dark.label"
        },
        {
          "value": "light",
          "label": "t:sections.all.colors.light.label"
        }
        ],
      "default": "dark"
    }
    ],
    "blocks": [
      {
        "type": "image",
        "name": "t:sections.all.shape.icon",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "t:sections.all.image"
          },
          {
            "type": "text",
            "id": "heading",
            "default": "Feature",
            "label": "t:sections.all.heading"
          },
          {
            "type": "richtext",
            "id": "description",
            "label": "t:sections.all.description"
          }
        ]
      }
  ],
  "presets": [
    {
      "name": "t:sections.feature_icons.presets.name",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        }
      ]
    }
  ]
}
{% endschema %}